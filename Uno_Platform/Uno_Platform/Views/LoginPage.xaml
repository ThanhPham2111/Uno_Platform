<Page x:Class="Uno_Platform.Views.LoginPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Uno_Platform.Views"
      xmlns:components="using:Uno_Platform.Components"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
  <Grid>
    <!-- Background Gradient -->
    <Grid.Background>
      <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
        <GradientStop Color="#F8FAFC" Offset="0"/>
        <GradientStop Color="#E2E8F0" Offset="1"/>
      </LinearGradientBrush>
    </Grid.Background>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
      <StackPanel HorizontalAlignment="Center" 
                  VerticalAlignment="Center"
                  Padding="20">
        
        <!-- Login Card -->
        <Border Background="{StaticResource SurfaceBrush}"
                CornerRadius="{StaticResource BorderRadiusLarge}"
                Padding="40"
                Width="400"
                MaxWidth="400"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                Shadow="{StaticResource SharedShadow}"
                Translation="0,0,32">
          <Border.Resources>
            <ThemeShadow x:Name="SharedShadow"/>
          </Border.Resources>

          <StackPanel Spacing="24">
            <!-- Header -->
            <Grid>
                <Button x:Name="BackButton"
                        Click="BackButton_Click"
                        Style="{StaticResource IconButtonStyle}"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        Margin="-20,-20,0,0">
                    <SymbolIcon Symbol="Back"/>
                </Button>
                
                <StackPanel Spacing="8" HorizontalAlignment="Center" Margin="0,0,0,8">
                  <Border Width="64" Height="64" 
                          CornerRadius="32" 
                          Background="{StaticResource PrimaryGradientBrush}"
                          Margin="0,0,0,16">
                    <SymbolIcon Symbol="Contact" Foreground="White" RenderTransformOrigin="0.5,0.5">
                      <SymbolIcon.RenderTransform>
                        <ScaleTransform ScaleX="1.5" ScaleY="1.5"/>
                      </SymbolIcon.RenderTransform>
                    </SymbolIcon>
                  </Border>
                  
                  <TextBlock Text="Welcome Back" 
                             Style="{StaticResource Heading2Style}"
                             HorizontalAlignment="Center"/>
                  
                  <TextBlock Text="Sign in to continue" 
                             Style="{StaticResource SecondaryTextStyle}"
                             HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>

            <!-- Form -->
            <StackPanel Spacing="16">
              <!-- Username -->
              <StackPanel Spacing="8">
                <TextBlock Text="Username" Style="{StaticResource BodyTextStyle}" FontWeight="SemiBold"/>
                <TextBox x:Name="UsernameTextBox"
                         Text="{x:Bind ViewModel.Username, Mode=TwoWay}"
                         PlaceholderText="Enter your username"
                         Style="{StaticResource ModernTextBoxStyle}"
                         HorizontalAlignment="Stretch"/>
              </StackPanel>

              <!-- Password -->
              <StackPanel Spacing="8">
                <TextBlock Text="Password" Style="{StaticResource BodyTextStyle}" FontWeight="SemiBold"/>
                <PasswordBox x:Name="PasswordBox"
                             PasswordChanged="PasswordBox_PasswordChanged"
                             PlaceholderText="Enter your password"
                             Height="48"
                             BorderBrush="{StaticResource BorderBrush}"
                             BorderThickness="2"
                             CornerRadius="{StaticResource BorderRadiusMedium}"
                             Padding="10"
                             HorizontalAlignment="Stretch"/>
              </StackPanel>
            </StackPanel>

            <!-- Error Message -->
            <TextBlock Text="{x:Bind ViewModel.ErrorMessage, Mode=OneWay}"
                       Foreground="{StaticResource ErrorBrush}"
                       FontSize="{StaticResource FontSizeSmall}"
                       TextWrapping="Wrap"
                       HorizontalAlignment="Center"
                       Visibility="{x:Bind ViewModel.ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}"
                       Margin="0,8,0,0"/>

            <!-- Login Button -->
            <Button Content="Sign In" 
                    Command="{x:Bind ViewModel.LoginCommand}"
                    Style="{StaticResource PrimaryButtonStyle}"
                    HorizontalAlignment="Stretch"
                    Margin="0,8,0,0"/>
            
            <!-- Footer -->
            <TextBlock Text="Demo Account: Any username/password (min 3 chars)" 
                       FontSize="{StaticResource FontSizeTiny}"
                       Foreground="{StaticResource TextSecondaryBrush}"
                       HorizontalAlignment="Center"
                       TextAlignment="Center"
                       TextWrapping="Wrap"
                       Margin="0,16,0,0"/>
          </StackPanel>
        </Border>
      </StackPanel>
    </ScrollViewer>
    
    <!-- Loading Indicator Overlay -->
    <components:LoadingIndicator IsLoading="{x:Bind ViewModel.IsLoading, Mode=OneWay}"
                               Message="Logging in..."/>
  </Grid>
</Page>

